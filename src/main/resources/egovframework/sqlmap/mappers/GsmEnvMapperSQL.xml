<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.kt.smartfarm.supervisor.mapper.GsmEnvMapper">
	



	<insert id="insert" parameterType="gsmEnvVO">
		INSERT INTO gsm_info (
			gsm_key,
			area_code, 
			farm_nickname, 
			system_host, 
			system_port, 		
			farm_nickname_i18n
		)
		VALUES (
			#{gsmKey}, 
			#{areaCode}, 
			#{farmNickname},
			#{systemHost}, 
			#{systemPort},		
			#{farmNicknameI18n}
		);
	</insert>
	
	<update id="update" parameterType="gsmEnvVO">
		UPDATE controller
		SET
		<if test="controller_info_id != null">controller_info_id = #{controllerInfoId},</if>
		,
		<if test="controller_type != null">controller_type = #{controllerType},</if>
		,
		<if test="ip != null">ip = #{ip},</if>
		,
		<if test="PORT != null">PORT = #{port},</if>
		,
		<if test="controller_status != null">controller_status = #{controllerStatus},</if>
		,
		<if test="description != null">description = #{description},</if>
		WHERE gsm_key = #{gsmKey} AND id = #{id};
	</update>
	
	<delete id="delete">
		DELETE
		FROM gsm_info
		WHERE gsm_key = #{gsm_key};
	</delete>
	
	
	<select id="list" resultType="gsmEnvVO" parameterType="map">
		SELECT
			gsm_key, user_info_id, is_mine, area_code,
 			farm_nickname, update_date, owner_user_info_id, master_system_host,
 			master_system_port, system_host, system_port, cropsurl, imsurl,
 			mqtt_broker_host, mqtt_broker_port, server_read_time, product_interval,
 			monitoring_interval, history_save_db_interval, sensor_current_retention_period,
 			debug_stop_event, debug_stop_crops, debug_stop_device_auto_control, debug_stop_ims,
 			delay_auto_control_start, package_version, schema_version, nutrient_monitoring_interval,
 			farm_nickname_i18n, user_id, farm_db_id, category_id
		FROM gsm_info
		<where>			
			<if test="gsm_key != null"> AND gsm_key = #{gsmKey}</if>
		</where>
		;
	</select>

</mapper>

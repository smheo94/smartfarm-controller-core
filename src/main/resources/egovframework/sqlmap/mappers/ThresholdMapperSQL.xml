<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.kt.smartfarm.supervisor.mapper.ThresholdMapper">

	 
	<select id ="getThreshold" parameterType="map" resultType="thresholdVO">
		SELECT 
			gsm_key, green_house_id, update_date, device_type, device_type_idx, low_value, high_value
  		FROM gsm_threshold
  		WHERE gsm_key = #{gsm_key} AND green_house_id = #{green_house_id}
	</select>
	
	<insert id ="insert" parameterType="thresholdVO">	
		REPLACE INTO gsm_threshold(
			gsm_key,green_house_id,update_date,device_type,device_type_idx, low_value, high_value
		)VALUES (
			#{gsmKey},NOW(),#{deviceType}, #{idx}, #{low}, #{high}
		);		
	</insert>
	
	<DELETE id="delete" parameterType="map">
		DELETE
		FROM sf_main.gsm_threshold
		WHERE gsm_key = #{gsm_key} AND green_house_id = #{green_house_id};
	</DELETE>
	<!-- 
	<update id ="update" parameterType="thresholdVO">
		UPDATE gsm_threshold
		SET 			 
			 <if test="outsideHighTemp != null">outside_high_temp = #{outsideHighTemp},</if>
			 <if test="outsideLowTemp != null">outside_low_temp= #{outsideLowTemp},</if>
			 <if test="outsideHighHum != null">outside_high_hum= #{outsideHighHum},</if>
			 <if test="outsideLowHum != null">outside_low_hum= #{outsideLowHum},</if>
			 <if test="windSpeed != null">wind_speed= #{windSpeed},</if>
			 <if test="rainDetector != null">rain_detector= #{rainDetector},</if>
			 <if test="insideHighTemp != null">inside_high_temp= #{insideHighTemp},</if>
			 <if test="insideLowTemp != null"> inside_low_temp= #{insideLowTemp},</if>
			 <if test="insideHighHum != null">inside_high_hum= #{insideHighHum},</if>
			 <if test="insideLowHum != null">inside_low_hum= #{insideLowHum},</if>
			 <if test="outsideHighTempUse != null">outside_high_temp_use= #{outsideHighTempUse},</if>
			 <if test="outsideLowTempUse != null">outside_low_temp_use= #{outsideLowTempUse},</if>
			 <if test="outsideHighHumUse != null">outside_high_hum_use= #{outsideHighHumUse},</if>
			 <if test="outsideLowHumUse != null">outside_low_hum_use= #{outsideLowHumUse},</if>
			 <if test="windSpeedUse != null">wind_speed_use= #{windSpeedUse},</if>
			 <if test="rainDetectorUse != null">rain_detector_use= #{rainDetectorUse},</if>
			 <if test="insideHighTempUse != null">inside_high_temp_use= #{insideHighTempUse},</if>
			 <if test="insideLowTempUse != null">inside_low_temp_use= #{insideLowTempUse},</if>
			 <if test="insideHighHumUse != null">inside_high_hum_use= #{insideHighHumUse},</if>
			 <if test="insideLowHumUse != null">inside_low_hum_use= #{insideLowHumUse},</if>
			 update_date = NOW()
		WHERE gsm_key=#{gsmKey};
	</update>
	 -->
	
	
</mapper>

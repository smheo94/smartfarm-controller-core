<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.kt.smartfarm.supervisor.mapper.ThresholdMapper">

	 
	<select id ="getThreshold" parameterType="Integer" resultType="thresholdVO">
		SELECT 
			gsm_key AS gsmKey ,
			update_date AS updateDate ,
			outside_high_temp AS outsideHighTemp ,
			outside_low_temp AS outsideLowTemp ,
			outside_high_hum AS outsideHighHum ,
			outside_low_hum AS outsideLowHum ,
			wind_speed AS windSpeed ,
			rain_detector AS rainDetector ,
			inside_high_temp AS insideHighTemp ,
			inside_low_temp AS insideLowTemp ,
			inside_high_hum AS insideHighHum ,
			inside_low_hum AS insideLowHum ,
			outside_high_temp_use AS outsideHighTempUse ,
			outside_low_temp_use AS outsideLowTempUse ,
			outside_high_hum_use AS outsideHighHumUse ,
			outside_low_hum_use AS outsideLowHumUse ,
			wind_speed_use AS windSpeedUse ,
			rain_detector_use AS rainDetectorUse ,
			inside_high_temp_use AS insideHighTempUse ,
			inside_low_temp_use AS insideLowTempUse ,
			inside_high_hum_use AS insideHighHumUse ,
			inside_low_hum_use AS insideLowHumUse
  		FROM gsm_threshold
  		WHERE gsm_key = #{gsmKey}
	</select>
	
	<insert id ="insert" parameterType="thresholdVO">
		INSERT INTO gsm_threshold (
			gsm_key, update_date
		<if test="outsideHighTemp != null">, outside_high_temp </if>
		<if test="outsideLowTemp != null">, outside_low_temp </if>
		<if test="outsideHighHum != null">, outside_high_hum </if>
		<if test="outsideLowHum != null">, outside_low_hum </if>
		<if test="windSpeed != null">, wind_speed </if>
		<if test="rainDetector != null">, rain_detector </if>
		<if test="insideHighTemp != null">, inside_high_temp </if>
		<if test="insideLowTemp != null">, inside_low_temp </if>
		<if test="insideHighHum != null">, inside_high_hum </if>
		<if test="insideLowHum != null">, inside_low_hum </if>
		<if test="outsideHighTempUse != null">, outside_high_temp_use </if>
		<if test="outsideLowTempUse != null">, outside_low_temp_use </if>
		<if test="outsideHighHumUse != null">, outside_high_hum_use </if>
		<if test="outsideLowHumUse != null">, outside_low_hum_use </if>
		<if test="windSpeedUse != null">, wind_speed_use </if>
		<if test="rainDetectorUse != null">, rain_detector_use </if>
		<if test="insideHighTempUse != null">, inside_high_temp_use </if>
		<if test="insideLowTempUse != null">, inside_low_temp_use </if>
		<if test="insideHighHumUse != null">, inside_high_hum_use </if>
		<if test="insideLowHumUse != null">, inside_low_hum_use </if>
		)
		VALUES (
			#{gsmKey},NOW()
		<if test="outsideHighTemp != null">,#{outsideHighTemp} </if>
		<if test="outsideLowTemp != null">,#{outsideLowTemp} </if>
		<if test="outsideHighHum != null">,#{outsideHighHum} </if>
		<if test="outsideLowHum != null">,#{outsideLowHum} </if>
		<if test="windSpeed != null">,#{windSpeed} </if>
		<if test="rainDetector != null">,#{rainDetector} </if>
		<if test="insideHighTemp != null">,#{insideHighTemp} </if>
		<if test="insideLowTemp != null">,#{insideLowTemp} </if>
		<if test="insideHighHum != null">,#{insideHighHum} </if>
		<if test="insideLowHum != null">,#{insideLowHum} </if>
		<if test="outsideHighTempUse != null">, #{outsideHighTempUse} </if>
		<if test="outsideLowTempUse != null">, #{outsideLowTempUse} </if>
		<if test="outsideHighHumUse != null">, #{outsideHighHumUse} </if>
		<if test="outsideLowHumUse != null">, #{outsideLowHumUse} </if>
		<if test="windSpeedUse != null">, #{windSpeedUse} </if>
		<if test="rainDetectorUse != null">, #{rainDetectorUse} </if>
		<if test="insideHighTempUse != null">, #{insideHighTempUse} </if>
		<if test="insideLowTempUse != null">, #{insideLowTempUse} </if>
		<if test="insideHighHumUse != null">, #{insideHighHumUse} </if>
		<if test="insideLowHumUse != null">, #{insideLowHumUse} </if>
		) ON DUPLICATE KEY UPDATE
			 <if test="outsideHighTemp != null">outside_high_temp = #{outsideHighTemp},</if>
			 <if test="outsideLowTemp != null">outside_low_temp= #{outsideLowTemp},</if>
			 <if test="outsideHighHum != null">outside_high_hum= #{outsideHighHum},</if>
			 <if test="outsideLowHum != null">outside_low_hum= #{outsideLowHum},</if>
			 <if test="windSpeed != null">wind_speed= #{windSpeed},</if>
			 <if test="rainDetector != null">rain_detector= #{rainDetector},</if>
			 <if test="insideHighTemp != null">inside_high_temp= #{insideHighTemp},</if>
			 <if test="insideLowTemp != null"> inside_low_temp= #{insideLowTemp},</if>
			 <if test="insideHighHum != null">inside_high_hum= #{insideHighHum},</if>
			 <if test="insideLowHum != null">inside_low_hum= #{insideLowHum},</if>
			 <if test="outsideHighTempUse != null">outside_high_temp_use= #{outsideHighTempUse},</if>
			 <if test="outsideLowTempUse != null">outside_low_temp_use= #{outsideLowTempUse},</if>
			 <if test="outsideHighHumUse != null">outside_high_hum_use= #{outsideHighHumUse},</if>
			 <if test="outsideLowHumUse != null">outside_low_hum_use= #{outsideLowHumUse},</if>
			 <if test="windSpeedUse != null">wind_speed_use= #{windSpeedUse},</if>
			 <if test="rainDetectorUse != null">rain_detector_use= #{rainDetectorUse},</if>
			 <if test="insideHighTempUse != null">inside_high_temp_use= #{insideHighTempUse},</if>
			 <if test="insideLowTempUse != null">inside_low_temp_use= #{insideLowTempUse},</if>
			 <if test="insideHighHumUse != null">inside_high_hum_use= #{insideHighHumUse},</if>
			 <if test="insideLowHumUse != null">inside_low_hum_use= #{insideLowHumUse},</if>
			 update_date = NOW();
	</insert>
	
	<update id ="update" parameterType="thresholdVO">
		UPDATE gsm_threshold
		SET 			 
			 <if test="outsideHighTemp != null">outside_high_temp = #{outsideHighTemp},</if>
			 <if test="outsideLowTemp != null">outside_low_temp= #{outsideLowTemp},</if>
			 <if test="outsideHighHum != null">outside_high_hum= #{outsideHighHum},</if>
			 <if test="outsideLowHum != null">outside_low_hum= #{outsideLowHum},</if>
			 <if test="windSpeed != null">wind_speed= #{windSpeed},</if>
			 <if test="rainDetector != null">rain_detector= #{rainDetector},</if>
			 <if test="insideHighTemp != null">inside_high_temp= #{insideHighTemp},</if>
			 <if test="insideLowTemp != null"> inside_low_temp= #{insideLowTemp},</if>
			 <if test="insideHighHum != null">inside_high_hum= #{insideHighHum},</if>
			 <if test="insideLowHum != null">inside_low_hum= #{insideLowHum},</if>
			 <if test="outsideHighTempUse != null">outside_high_temp_use= #{outsideHighTempUse},</if>
			 <if test="outsideLowTempUse != null">outside_low_temp_use= #{outsideLowTempUse},</if>
			 <if test="outsideHighHumUse != null">outside_high_hum_use= #{outsideHighHumUse},</if>
			 <if test="outsideLowHumUse != null">outside_low_hum_use= #{outsideLowHumUse},</if>
			 <if test="windSpeedUse != null">wind_speed_use= #{windSpeedUse},</if>
			 <if test="rainDetectorUse != null">rain_detector_use= #{rainDetectorUse},</if>
			 <if test="insideHighTempUse != null">inside_high_temp_use= #{insideHighTempUse},</if>
			 <if test="insideLowTempUse != null">inside_low_temp_use= #{insideLowTempUse},</if>
			 <if test="insideHighHumUse != null">inside_high_hum_use= #{insideHighHumUse},</if>
			 <if test="insideLowHumUse != null">inside_low_hum_use= #{insideLowHumUse},</if>
			 update_date = NOW()
		WHERE gsm_key=#{gsmKey};
	</update>
	
	
	
</mapper>
